
# WebSocket API Reference

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç –ø—Ä–æ—Ç–æ–∫–æ–ª –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –º–µ–∂–¥—É –∫–ª–∏–µ–Ω—Ç–æ–º –∏ —Å–µ—Ä–≤–µ—Ä–æ–º –∏–≥—Ä—ã **Cognitive Dungeon**.

**–ê–¥—Ä–µ—Å –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:** `ws://localhost:8080/ws`

## –û–±—â–∏–π –ø–æ—Ç–æ–∫ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è (Flow)

1.  **Handshake:** –ö–ª–∏–µ–Ω—Ç —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç WebSocket-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∏ –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–æ–º–∞–Ω–¥—É `LOGIN`, —á—Ç–æ–±—ã "–ø—Ä–∏–≤—è–∑–∞—Ç—å" —Å–µ—Å—Å–∏—é –∫ –∏–≥—Ä–æ–≤–æ–π —Å—É—â–Ω–æ—Å—Ç–∏.
2.  **Update Loop:** –°–µ—Ä–≤–µ—Ä –Ω–∞—á–∏–Ω–∞–µ—Ç –ø—Ä–∏—Å—ã–ª–∞—Ç—å –∫–ª–∏–µ–Ω—Ç—É —Å–æ–æ–±—â–µ–Ω–∏—è `UPDATE`. –¢–∞–∫–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –ø—Ä–∏—Ö–æ–¥–∏—Ç –∫–∞–∂–¥—ã–π —Ä–∞–∑, –∫–æ–≥–¥–∞ –Ω–∞—Å—Ç—É–ø–∞–µ—Ç —Ö–æ–¥ —Å—É—â–Ω–æ—Å—Ç–∏, –∫–æ—Ç–æ—Ä–æ–π —É–ø—Ä–∞–≤–ª—è–µ—Ç –∫–ª–∏–µ–Ω—Ç. –û–Ω–æ —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–ª–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤–∏–¥–∏–º–æ–≥–æ –º–∏—Ä–∞.
3.  **Action:** –ö–æ–≥–¥–∞ –∫–ª–∏–µ–Ω—Ç –ø–æ–ª—É—á–∞–µ—Ç `UPDATE`, –≥–¥–µ `activeEntityId` —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å `myEntityId`, –æ–Ω "—Ä–∞–∑–±–ª–æ–∫–∏—Ä—É–µ—Ç" –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏–≥—Ä–æ–∫—É —Å–æ–≤–µ—Ä—à–∏—Ç—å –¥–µ–π—Å—Ç–≤–∏–µ.
4.  **Command:** –ò–≥—Ä–æ–∫ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –¥–µ–π—Å—Ç–≤–∏–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–∞–∂–∏–º–∞–µ—Ç –∫–Ω–æ–ø–∫—É –¥–≤–∏–∂–µ–Ω–∏—è), –∏ –∫–ª–∏–µ–Ω—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â—É—é –∫–æ–º–∞–Ω–¥—É (`MOVE`, `ATTACK` –∏ —Ç.–¥.).
5.  **Resolution:** –°–µ—Ä–≤–µ—Ä –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∫–æ–º–∞–Ω–¥—É, –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –º–∏—Ä–∞ –∏ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –∞–∫—Ç–æ—Ä—É –≤ –æ—á–µ—Ä–µ–¥–∏ —Ö–æ–¥–æ–≤. –¶–∏–∫–ª –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è.

---

## ‚û°Ô∏è –ö–ª–∏–µ–Ω—Ç -> –°–µ—Ä–≤–µ—Ä (Commands)

–í—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç –∫–ª–∏–µ–Ω—Ç–∞ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ–±–µ—Ä–Ω—É—Ç—ã –≤ –æ–±—ä–µ–∫—Ç `ClientCommand`.

### `ClientCommand` (–û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä)

```json
{
  "action": "ACTION_NAME",
  "token": "entity_id_string",
  "payload": { ... }
}
```
-   `action` (string, **required**): –ù–∞–∑–≤–∞–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏—è. –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –∫–∞–∫–æ–π `payload` –æ–∂–∏–¥–∞–µ—Ç —Å–µ—Ä–≤–µ—Ä.
-   `token` (string, **optional**): ID —Å—É—â–Ω–æ—Å—Ç–∏. **–û–±—è–∑–∞—Ç–µ–ª–µ–Ω —Ç–æ–ª—å–∫–æ –¥–ª—è —Å–∞–º–æ–π –ø–µ—Ä–≤–æ–π –∫–æ–º–∞–Ω–¥—ã `LOGIN`**. –î–ª—è –≤—Å–µ—Ö –ø–æ—Å–ª–µ–¥—É—é—â–∏—Ö –∫–æ–º–∞–Ω–¥ —Å–µ—Ä–≤–µ—Ä –∏–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç –∫–ª–∏–µ–Ω—Ç–∞ –ø–æ —Å–∞–º–æ–º—É WebSocket-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—é.
-   `payload` (object, **optional**): JSON-–æ–±—ä–µ–∫—Ç —Å –¥–∞–Ω–Ω—ã–º–∏, –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–º–∏ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –¥–µ–π—Å—Ç–≤–∏—è. –ï–≥–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç `action`.

### –¢–∏–ø—ã –¥–µ–π—Å—Ç–≤–∏–π –∏ –∏—Ö `payload`

#### `LOGIN`
-   **–û–ø–∏—Å–∞–Ω–∏–µ:** –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç–∞ –∏ "–∑–∞–≤–ª–∞–¥–µ–Ω–∏–µ" —Å—É—â–Ω–æ—Å—Ç—å—é. –î–æ–ª–∂–Ω–∞ –±—ã—Ç—å –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ **—Å—Ä–∞–∑—É –ø–æ—Å–ª–µ** —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è.
-   **Payload:** –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è.
-   **–ü—Ä–∏–º–µ—Ä:**
    ```json
    { "action": "LOGIN", "token": "hero_1" }
    ```

#### `MOVE`
-   **–û–ø–∏—Å–∞–Ω–∏–µ:** –ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ —Å—É—â–Ω–æ—Å—Ç–∏ –Ω–∞ –æ–¥–Ω—É –∫–ª–µ—Ç–∫—É.
-   **Payload:** `DirectionPayload`
    -   `dx` (number): –°–º–µ—â–µ–Ω–∏–µ –ø–æ –æ—Å–∏ X. –î–æ–ø—É—Å—Ç–∏–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è: `-1`, `0`, `1`.
    -   `dy` (number): –°–º–µ—â–µ–Ω–∏–µ –ø–æ –æ—Å–∏ Y. –î–æ–ø—É—Å—Ç–∏–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è: `-1`, `0`, `1`.
-   **–ü—Ä–∏–º–µ—Ä (–¥–≤–∏–∂–µ–Ω–∏–µ –≤–ø—Ä–∞–≤–æ):**
    ```json
    { "action": "MOVE", "payload": { "dx": 1, "dy": 0 } }
    ```

#### `ATTACK`
-   **–û–ø–∏—Å–∞–Ω–∏–µ:** –ê—Ç–∞–∫–∞ –¥—Ä—É–≥–æ–π —Å—É—â–Ω–æ—Å—Ç–∏.
-   **Payload:** `EntityPayload`
    -   `targetId` (string): ID —Å—É—â–Ω–æ—Å—Ç–∏, –∫–æ—Ç–æ—Ä—É—é –Ω—É–∂–Ω–æ –∞—Ç–∞–∫–æ–≤–∞—Ç—å.
-   **–ü—Ä–∏–º–µ—Ä:**
    ```json
    { "action": "ATTACK", "payload": { "targetId": "e_2" } }
    ```

#### `TALK`
-   **–û–ø–∏—Å–∞–Ω–∏–µ:** –ü–æ–ø—ã—Ç–∫–∞ –∑–∞–≥–æ–≤–æ—Ä–∏—Ç—å —Å –¥—Ä—É–≥–æ–π —Å—É—â–Ω–æ—Å—Ç—å—é.
-   **Payload:** `EntityPayload`
    -   `targetId` (string): ID —Å—É—â–Ω–æ—Å—Ç–∏, —Å –∫–æ—Ç–æ—Ä–æ–π –Ω—É–∂–Ω–æ –ø–æ–≥–æ–≤–æ—Ä–∏—Ç—å.
-   **–ü—Ä–∏–º–µ—Ä:**
    ```json
    { "action": "TALK", "payload": { "targetId": "npc_blacksmith" } }
    ```

#### `INTERACT`
-   **–û–ø–∏—Å–∞–Ω–∏–µ:** –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å –æ–±—ä–µ–∫—Ç–æ–º –≤ –º–∏—Ä–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ª–µ—Å—Ç–Ω–∏—Ü–µ–π, —Ä—ã—á–∞–≥–æ–º, —Å—É–Ω–¥—É–∫–æ–º). –ò–≥—Ä–æ–∫ –¥–æ–ª–∂–µ–Ω –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –Ω–∞ —Ç–æ–π –∂–µ –∫–ª–µ—Ç–∫–µ, —á—Ç–æ –∏ –æ–±—ä–µ–∫—Ç.
-   **Payload:** `EntityPayload`
    -   `targetId` (string): ID —Å—É—â–Ω–æ—Å—Ç–∏-–æ–±—ä–µ–∫—Ç–∞, —Å –∫–æ—Ç–æ—Ä–æ–π –Ω—É–∂–Ω–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å.
-   **–ü—Ä–∏–º–µ—Ä (–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ª–µ—Å—Ç–Ω–∏—Ü—ã):**
    ```json
    { "action": "INTERACT", "payload": { "targetId": "exit_down_from_0" } }
    ```

#### `WAIT`
-   **–û–ø–∏—Å–∞–Ω–∏–µ:** –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å —Ö–æ–¥.
-   **Payload:** –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è (`{}` –∏–ª–∏ `null`).
-   **–ü—Ä–∏–º–µ—Ä:**
    ```json
    { "action": "WAIT", "payload": {} }
    ```

#### `PICKUP`
-   **–û–ø–∏—Å–∞–Ω–∏–µ:** –ü–æ–¥–æ–±—Ä–∞—Ç—å –ø—Ä–µ–¥–º–µ—Ç —Å –ø–æ–ª–∞. –ò–≥—Ä–æ–∫ –¥–æ–ª–∂–µ–Ω –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –Ω–∞ –æ–¥–Ω–æ–π –∫–ª–µ—Ç–∫–µ —Å –ø—Ä–µ–¥–º–µ—Ç–æ–º –∏–ª–∏ —Å–æ—Å–µ–¥–Ω–µ–π.
-   **Payload:** `ItemPayload`
    -   `itemId` (string): ID –ø—Ä–µ–¥–º–µ—Ç–∞ –Ω–∞ –∫–∞—Ä—Ç–µ.
-   **–ü—Ä–∏–º–µ—Ä:**
    ```json
    { "action": "PICKUP", "payload": { "itemId": "item_sword_123" } }
    ```

#### `DROP`
-   **–û–ø–∏—Å–∞–Ω–∏–µ:** –í—ã–±—Ä–æ—Å–∏—Ç—å –ø—Ä–µ–¥–º–µ—Ç –∏–∑ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è –Ω–∞ –ø–æ–ª.
-   **Payload:** `ItemPayload`
    -   `itemId` (string): ID –ø—Ä–µ–¥–º–µ—Ç–∞ –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ.
    -   `count` (number, **optional**): –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–µ–¥–º–µ—Ç–æ–≤ (–µ—Å–ª–∏ –ø—Ä–µ–¥–º–µ—Ç —Å–∫–ª–∞–¥—ã–≤–∞–µ–º—ã–π).
-   **–ü—Ä–∏–º–µ—Ä:**
    ```json
    { "action": "DROP", "payload": { "itemId": "item_potion_5", "count": 1 } }
    ```

#### `USE`
-   **–û–ø–∏—Å–∞–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–µ–¥–º–µ—Ç (—Å—ä–µ—Å—Ç—å –µ–¥—É, –≤—ã–ø–∏—Ç—å –∑–µ–ª—å–µ).
-   **Payload:** `ItemPayload`
    -   `itemId` (string): ID –ø—Ä–µ–¥–º–µ—Ç–∞ –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ.
-   **–ü—Ä–∏–º–µ—Ä:**
    ```json
    { "action": "USE", "payload": { "itemId": "item_health_potion" } }
    ```

#### `EQUIP`
-   **–û–ø–∏—Å–∞–Ω–∏–µ:** –ù–∞–¥–µ—Ç—å –ø—Ä–µ–¥–º–µ—Ç (–æ—Ä—É–∂–∏–µ –∏–ª–∏ –±—Ä–æ–Ω—é). –ü—Ä–µ–¥–º–µ—Ç –ø–µ—Ä–µ–º–µ—â–∞–µ—Ç—Å—è –∏–∑ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è –≤ —Å–ª–æ—Ç —ç–∫–∏–ø–∏—Ä–æ–≤–∫–∏.
-   **Payload:** `ItemPayload`
    -   `itemId` (string): ID –ø—Ä–µ–¥–º–µ—Ç–∞ –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ.
-   **–ü—Ä–∏–º–µ—Ä:**
    ```json
    { "action": "EQUIP", "payload": { "itemId": "item_iron_sword" } }
    ```

#### `UNEQUIP`
-   **–û–ø–∏—Å–∞–Ω–∏–µ:** –°–Ω—è—Ç—å —ç–∫–∏–ø–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø—Ä–µ–¥–º–µ—Ç. –ü—Ä–µ–¥–º–µ—Ç –ø–µ—Ä–µ–º–µ—â–∞–µ—Ç—Å—è –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å.
-   **Payload:** `ItemPayload`
    -   `itemId` (string): ID –ø—Ä–µ–¥–º–µ—Ç–∞ –≤ —Å–ª–æ—Ç–µ —ç–∫–∏–ø–∏—Ä–æ–≤–∫–∏.
-   **–ü—Ä–∏–º–µ—Ä:**
    ```json
    { "action": "UNEQUIP", "payload": { "itemId": "item_iron_sword" } }
    ```

---

## ‚¨ÖÔ∏è –°–µ—Ä–≤–µ—Ä -> –ö–ª–∏–µ–Ω—Ç (Updates)

–°–µ—Ä–≤–µ—Ä –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–ª–∏–µ–Ω—Ç—É –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π —Ç–∏–ø —Å–æ–æ–±—â–µ–Ω–∏—è ‚Äî `ServerResponse`, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–ª–Ω—ã–π —Å–Ω–∏–º–æ–∫ –∏–≥—Ä–æ–≤–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è.

### `ServerResponse` (–û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä)

```json
{
  "type": "UPDATE",
  "tick": 1250,
  "myEntityId": "hero_1",
  "activeEntityId": "e_2",
  "grid": { ... },
  "map": [ ... ],
  "entities": [ ... ],
  "logs": [ ... ]
}
```
-   `type` (string): –¢–∏–ø —Å–æ–æ–±—â–µ–Ω–∏—è. –ù–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –≤—Å–µ–≥–¥–∞ `"UPDATE"`.
-   `tick` (number): –¢–µ–∫—É—â–µ–µ –≥–ª–æ–±–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –≤ –∏–≥—Ä–µ.
-   `myEntityId` (string): ID —Å—É—â–Ω–æ—Å—Ç–∏, –∫–æ—Ç–æ—Ä–æ–π —É–ø—Ä–∞–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–π –∫–ª–∏–µ–Ω—Ç.
-   `activeEntityId` (string): ID —Å—É—â–Ω–æ—Å—Ç–∏, —á–µ–π —Ö–æ–¥ —Å–µ–π—á–∞—Å. **–ï—Å–ª–∏ `activeEntityId === myEntityId`, —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –¥–æ–ª–∂–µ–Ω —Ä–∞–∑—Ä–µ—à–∏—Ç—å –∏–≥—Ä–æ–∫—É –≤–≤–æ–¥.**
-   `grid` (`GridMeta`): –û–±—ä–µ–∫—Ç —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏ –æ —Ä–∞–∑–º–µ—Ä–µ –∫–∞—Ä—Ç—ã.
-   `map` (array of `TileView`): –ú–∞—Å—Å–∏–≤ –≤—Å–µ—Ö –≤–∏–¥–∏–º—ã—Ö –∏ –∏—Å—Å–ª–µ–¥–æ—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–º —Ç–∞–π–ª–æ–≤.
-   `entities` (array of `EntityView`): –ú–∞—Å—Å–∏–≤ –≤—Å–µ—Ö –≤–∏–¥–∏–º—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–º —Å—É—â–Ω–æ—Å—Ç–µ–π.
-   `logs` (array of `LogEntry`): –ú–∞—Å—Å–∏–≤ –Ω–æ–≤—ã—Ö –∏–≥—Ä–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π.

### –û–±—ä–µ–∫—Ç—ã –¥–∞–Ω–Ω—ã—Ö (DTOs)

#### `GridMeta`
-   `w` (number): –®–∏—Ä–∏–Ω–∞ –∫–∞—Ä—Ç—ã –≤ —Ç–∞–π–ª–∞—Ö.
-   `h` (number): –í—ã—Å–æ—Ç–∞ –∫–∞—Ä—Ç—ã –≤ —Ç–∞–π–ª–∞—Ö.

#### `TileView`
-   `x`, `y` (number): –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —Ç–∞–π–ª–∞.
-   `symbol` (string): –°–∏–º–≤–æ–ª –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è (e.g., `.` –¥–ª—è –ø–æ–ª–∞, `#` –¥–ª—è —Å—Ç–µ–Ω—ã).
-   `color` (string): –¶–≤–µ—Ç —Å–∏–º–≤–æ–ª–∞ (e.g., `#333333`).
-   `isWall` (boolean): `true`, –µ—Å–ª–∏ —Ç–∞–π–ª —è–≤–ª—è–µ—Ç—Å—è –Ω–µ–ø—Ä–æ—Ö–æ–¥–∏–º–æ–π —Å—Ç–µ–Ω–æ–π.
-   `isVisible` (boolean): `true`, –µ—Å–ª–∏ —Ç–∞–π–ª –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Ç–µ–∫—É—â–µ–º –ø–æ–ª–µ –∑—Ä–µ–Ω–∏—è.
-   `isExplored` (boolean): `true`, –µ—Å–ª–∏ —Å—É—â–Ω–æ—Å—Ç—å –∫–æ–≥–¥–∞-–ª–∏–±–æ –≤–∏–¥–µ–ª–∞ —ç—Ç–æ—Ç —Ç–∞–π–ª (–¥–ª—è "—Ç—É–º–∞–Ω–∞ –≤–æ–π–Ω—ã").

#### `EntityView`
-   `id` (string): –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Å—É—â–Ω–æ—Å—Ç–∏.
-   `type` (string): –¢–∏–ø —Å—É—â–Ω–æ—Å—Ç–∏ (`PLAYER`, `ENEMY`, `NPC`, `ITEM`).
-   `name` (string): –ò–º—è (e.g., "–ì–µ—Ä–æ–π", "–•–∏—Ç—Ä—ã–π –ì–æ–±–ª–∏–Ω").
-   `pos` (object): –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã `{ "x": number, "y": number }`.
-   `render` (object): –î–∞–Ω–Ω—ã–µ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è `{ "symbol": string, "color": string }`.
-   `stats` (`StatsView`, **optional**): –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ —Å—É—â–Ω–æ—Å—Ç–∏.
-   `inventory` (`InventoryView`, **optional**): –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å (–≤–∏–¥–µ–Ω —Ç–æ–ª—å–∫–æ –≤–ª–∞–¥–µ–ª—å—Ü—É).
-   `equipment` (`EquipmentView`, **optional**): –≠–∫–∏–ø–∏—Ä–æ–≤–∫–∞ (–≤–∏–¥–Ω–∞ —Ç–æ–ª—å–∫–æ –≤–ª–∞–¥–µ–ª—å—Ü—É).

#### `StatsView`
-   `hp`, `maxHp` (number): –¢–µ–∫—É—â–µ–µ –∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∑–¥–æ—Ä–æ–≤—å–µ.
-   `stamina`, `maxStamina` (number, **optional**): –í—ã–Ω–æ—Å–ª–∏–≤–æ—Å—Ç—å.
-   `gold`, `strength` (number, **optional**): –î—Ä—É–≥–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏.
-   `isDead` (boolean): `true`, –µ—Å–ª–∏ —Å—É—â–Ω–æ—Å—Ç—å –º–µ—Ä—Ç–≤–∞.

#### `InventoryView`
-   `items` (array of `ItemView`): –°–ø–∏—Å–æ–∫ –ø—Ä–µ–¥–º–µ—Ç–æ–≤ –≤ —Ä—é–∫–∑–∞–∫–µ.
-   `maxSlots` (number): –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–ª–æ—Ç–æ–≤.
-   `currentWeight` (number): –¢–µ–∫—É—â–∏–π –≤–µ—Å –≤–µ—â–µ–π.
-   `maxWeight` (number): –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –ø–µ—Ä–µ–Ω–æ—Å–∏–º—ã–π –≤–µ—Å.

#### `EquipmentView`
-   `weapon` (`ItemView`, **optional**): –ü—Ä–µ–¥–º–µ—Ç –≤ —Å–ª–æ—Ç–µ –æ—Ä—É–∂–∏—è.
-   `armor` (`ItemView`, **optional**): –ü—Ä–µ–¥–º–µ—Ç –≤ —Å–ª–æ—Ç–µ –±—Ä–æ–Ω–∏.

#### `ItemView`
-   `id` (string): ID –ø—Ä–µ–¥–º–µ—Ç–∞.
-   `name` (string): –ù–∞–∑–≤–∞–Ω–∏–µ.
-   `symbol` (string): –°–∏–º–≤–æ–ª.
-   `color` (string): –¶–≤–µ—Ç.
-   `category` (string): –ö–∞—Ç–µ–≥–æ—Ä–∏—è (`weapon`, `armor`, `potion`, `food`, `misc`).
-   `isStackable` (boolean): –ú–æ–∂–Ω–æ –ª–∏ —Å–æ–±–∏—Ä–∞—Ç—å –≤ —Å—Ç–∞–∫–∏.
-   `stackSize` (number): –¢–µ–∫—É—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤ —Å—Ç–∞–∫–µ.
-   `damage` (number, **optional**): –£—Ä–æ–Ω (–¥–ª—è –æ—Ä—É–∂–∏—è).
-   `defense` (number, **optional**): –ó–∞—â–∏—Ç–∞ (–¥–ª—è –±—Ä–æ–Ω–∏).
-   `weight` (number): –í–µ—Å –ø—Ä–µ–¥–º–µ—Ç–∞.
-   `value` (number): –°—Ç–æ–∏–º–æ—Å—Ç—å.
-   `isSentient` (boolean): –Ø–≤–ª—è–µ—Ç—Å—è –ª–∏ –ø—Ä–µ–¥–º–µ—Ç —Ä–∞–∑—É–º–Ω—ã–º (–¥–ª—è –¥–∏–∞–ª–æ–≥–æ–≤).


#### `LogEntry`
-   `id` (string): –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID.
-   `text` (string): –¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è.
-   `type` (string): –¢–∏–ø –ª–æ–≥–∞ –¥–ª—è —Å—Ç–∏–ª–∏–∑–∞—Ü–∏–∏: `INFO`, `COMBAT`, `SPEECH`, `ERROR`.
-   `timestamp` (number): –í—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏—è (Unix milliseconds).

---

## üå° HTTP Endpoints

–ö—Ä–æ–º–µ WebSocket, —Å–µ—Ä–≤–µ—Ä –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø—Ä–æ—Å—Ç—ã–µ HTTP-—ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏.

### `GET /health`
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–≥–æ, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –∂–∏–≤ –∏ –¥–æ—Å—Ç—É–ø–µ–Ω.
- **–ú–µ—Ç–æ–¥:** `GET`
- **–û—Ç–≤–µ—Ç:**
  - **HTTP 200 OK** –µ—Å–ª–∏ —Å–µ—Ä–≤–µ—Ä –∂–∏–≤
  - **Body:** `"ok"` (plain text)
- **–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:**
```bash
curl http://localhost:8080/health
```
- **–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:**
```bash
ok
```
- **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –≠—Ç–æ—Ç endpoint –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∏–≥—Ä–æ–≤–æ–π —Ü–∏–∫–ª –∏–ª–∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –º–∏—Ä–æ–≤ ‚Äî —Ç–æ–ª—å–∫–æ —Ç–æ, —á—Ç–æ –ø—Ä–æ—Ü–µ—Å—Å —Ä–∞–±–æ—Ç–∞–µ—Ç –∏ —Å–ª—É—à–∞–µ—Ç HTTP.

### `GET /version`

- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç JSON —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –±–∏–ª–¥–µ, –≤–∫–ª—é—á–∞—è BuildID, –¥–∞—Ç—É —Å–±–æ—Ä–∫–∏, commit, –≤–µ—Ç–∫—É –∏ CI-—Å–∏—Å—Ç–µ–º—É.
- **–ú–µ—Ç–æ–¥:** `GET`
- **Content-Type:** `application/json`

### –ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞

```bash
curl http://localhost:8080/version
````

### –ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞ (—É—Å–ø–µ—à–Ω—ã–π –±–∏–ª–¥)

```json
{
  "BuildID": 8736,
  "BuildDate": "2025-12-04",
  "Commit": "a1b2c3d",
  "Branch": "main",
  "CI": "GitHubActions",
  "Calculated": true,
  "Error": ""
}
```

### –ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞ (–Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π –±–∏–ª–¥ / –æ—à–∏–±–∫–∞)

```json
{
  "BuildID": 0,
  "BuildDate": "",
  "Commit": "",
  "Branch": "",
  "CI": "",
  "Calculated": false,
  "Error": "BuildDate is empty"
}
```

### –ü–æ—è—Å–Ω–µ–Ω–∏—è –∫ –ø–æ–ª—è–º

* `BuildID` (number): –ù–æ–º–µ—Ä —Å–±–æ—Ä–∫–∏, —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–Ω—ã–π –æ—Ç —ç–ø–æ—Ö–∏ 1999-01-31.
* `BuildDate` (string): –î–∞—Ç–∞ —Å–±–æ—Ä–∫–∏, —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–∞—è —á–µ—Ä–µ–∑ `-ldflags`.
* `Commit` (string): SHA —Ö—ç—à –∫–æ–º–º–∏—Ç–∞.
* `Branch` (string): –í–µ—Ç–∫–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è.
* `CI` (string): –°–∏—Å—Ç–µ–º–∞ CI, –µ—Å–ª–∏ —Å–±–æ—Ä–∫–∞ –≤—ã–ø–æ–ª–Ω—è–ª–∞—Å—å –≤ CI.
* `Calculated` (bool): –§–ª–∞–≥ —É—Å–ø–µ—à–Ω–æ–≥–æ —Ä–∞—Å—á–µ—Ç–∞ BuildID.
* `Error` (string): –¢–µ–∫—Å—Ç –æ—à–∏–±–∫–∏, –µ—Å–ª–∏ BuildID –Ω–µ —Ä–∞—Å—Å—á–∏—Ç–∞–Ω.
